<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>WCSim: Welcome to WCSim</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">WCSim
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Welcome to WCSim </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>WCSim is a very flexible GEANT4 based program for developing and simulating large water Cherenkov detectors.</p>
<p>As of August 2014 WCSim has been moved to GitHub. It can be found at:</p>
<p><a href="https://github.com/WCSim/WCSim">https://github.com/WCSim/WCSim</a></p>
<p>Tutorials and information about the branches and WCSim development model can be found on the wiki:</p>
<p><a href="https://github.com/WCSim/WCSim/wiki">https://github.com/WCSim/WCSim/wiki</a></p>
<p>WCSim has very few external dependencies. It relies on only ROOT and Geant4.</p>
<p>There is a mailing list which will send you GitHub push/checkin notifications here:</p>
<p><a href="https://lists.phy.duke.edu/mailman/listinfo/wcsim-git">https://lists.phy.duke.edu/mailman/listinfo/wcsim-git</a></p>
<p>You can follow issues/requests etc by watching the GitHub respository.</p>
<h2>Validation Webpage</h2>
<p>WCSim uses Travis CI to perform build and physics tests for each pull request and commit. The scripts it runs can be found at <a href="https://github.com/WCSim/Validation">https://github.com/WCSim/Validation</a></p>
<p>The output can be found at: <a href="https://wcsim.github.io/Validation/">https://wcsim.github.io/Validation/</a></p>
<h2>Documentation</h2>
<p>More detailed information about the simulation is available in <code>doc/DetectorDocumentation.pdf</code></p>
<h2>Current notes and how to build</h2>
<p>You should have a recent and working version of ROOT and GEANT4. (Known to work with GEANT 4.10.1p03 and ROOT v5.28.00) You also need all of the G4 data files including hadron xsecs etc. Those are the only requirements. The code should work with gcc 4.4.7. For v1.6.0 and earlier, use GEANT 4.9.4.p01.</p>
<h3>Build Instructions using make:</h3>
<p>To compile:</p>
<ul>
<li><code>make clean</code></li>
<li><code>make rootcint</code></li>
<li><code>make</code></li>
</ul>
<p>If you want to use these libraries with an external program then also do:</p>
<ul>
<li><code>make shared</code> [ For root programs]</li>
<li><code>make libWCSim.a</code> [ Also necessary for the event display?]</li>
</ul>
<h3>Build Instructions using CMake:</h3>
<p>CMake is cross-platform software for managing the build process in a compiler-independent way (cmake.org). It is recommended to build ROOT and GEANT4 also through CMake. The latter is very CMake friendly since GEANT 4.9.6, while it started introducing builds through CMake from 4.9.4 onwards (<a href="http://geant4.web.cern.ch/geant4/support/ReleaseNotes4.9.4.html#10">http://geant4.web.cern.ch/geant4/support/ReleaseNotes4.9.4.html#10</a>.). Using cmake, builds and source code need to well separated and make it easier to build many versions of the same software.</p>
<p>A recommended way to set up the directory structure in your own preferred WCSIM_HOME:</p>
<ul>
<li><code>${WCSIM_HOME}/WCSim</code> : contains the src dir, typically the cloned or unzipped code from GitHub</li>
<li><code>${WCSIM_HOME}/WCSim_build</code> : contains directories for each build, eg. for each branch you want to test or for different releases, comparing debugged versions, etc. This directory will contain the executable, the example macros and library for ROOT.</li>
</ul>
<p>To compile you need to have <code>CMakeLists.txt</code> in the WCSim source dir.</p>
<ul>
<li><code>mkdir ${WCSIM_HOME}/WCSim_build/mydir ; cd ${WCSIM_HOME}/WCSim_build/mydir</code></li>
<li>Set up the Geant4_Dir: <code>export Geant4_DIR=${HOME}/Geant4/install/geant4.9.6.p04</code> (from the make install phase of Geant4)</li>
<li><code>cmake ../../WCSim</code> : this executes the commands in <code>CMakeLists.txt</code> and generates the Makefiles for both the ROOT library as the main executable.</li>
<li><code>make clean</code> : if necessary</li>
<li><code>make</code> : will first compile the libWCSimRoot.so which you need for using the ROOT Dict from WCSim and then compile WCSim.</li>
</ul>
<p>To recompile:</p>
<ul>
<li>Typically just <code>make</code> will be enough and also redo the cmake phase if something changed.</li>
<li>Sometimes you need to <code>make clean</code> first.</li>
<li>When there are problems, try removing <code>CMakeCache.txt</code>, and redo the cmake.</li>
</ul>
<p>Useful cmake commands:</p>
<ul>
<li><code>make edit_cache</code> : customize the build.</li>
<li><code>make rebuild_cache</code> : redo the cmake phase.</li>
</ul>
<h3>Using WCSim without building using Docker:</h3>
<p>Docker allows you to use WCSim without compiling in an OS independant way. The Docker images are hosted on DockerHub and can be used by following the steps below.</p>
<p>1) Install Docker cross platform instructions can be found at <a href="https://www.docker.com/">https://www.docker.com/</a> 2) Pull the WCSim image from docker hub by using <code>docker pull wcsim/wcsim:tag</code> where <code>tag</code> is the tagged version or use the tag <code>latest</code> to get the current develop branch 3) Run the docker image and create a container <code>docker run --name=WCSim -i -t wcsim/wcsim:tag</code> this will give you a shell in the container's OS with WCSim already built. To save data from inside your docker image mount a local folder in the docker image at runtime and then anything placed in that directory will be available in that folder after exit. To do that run the following <code>docker run -v local_folder_path:docker_mount_path -i -t wcsim/wcsim:tag</code> 4) Once you have run the docker image, you will already be in <code>$WCSIMDIR</code> and WCSim (and prerequisites) will be setup. Therefore, you can just start running WCSim as normal from this directory 5) To exit the docker image <code>exit</code></p>
<p>(Note: You only need to use the <code>docker run</code> command once to create the container. Once created you changes are saved in that container instance and you can start and stop the contianer at any time with <code>docker start WCSim</code> and <code>docker stop WCSim</code>);</p>
<p>Extra docker commands: 1) See all images <code>docker images</code> 2) Delete an image <code>docker rmi imageID</code> 3) See all containers <code>docker ps -a</code> 4) Delete a container <code>docker rm ContainerID</code></p>
<h4>Using WCSim without building using Singularity</h4>
<p>Singularity is a similar container tool with different philosphies. The most important being that you can't run as root. This means that it may be installed and available to use on your local cluster.</p>
<p>You should be able to run the docker container with singularity without any problems. Just to note that $WCSIMDIR will be read-only, therefore you should run WCSim elsewhere (if you forget you'll see a nasty seg fault - this is just because of the read-only directory).</p>
<h2>Running WCSim</h2>
<p>To test that WCSim is working, try running the test macro <code>WCSim.mac</code>, which runs 10 electrons with 500 MeV of energy in the Super-Kamiokande detector. The command is one of the following, depending on how WCSim was built:</p>
<p><code>./bin/Linux-g++/WCSim WCSim.mac</code></p>
<p><code>./exe/bin/Linux-g++/WCSim WCSim.mac</code></p>
<p><code>WCSim.mac</code> is well commented. Take a look inside (and also at other <code>.mac</code> files in <code>/macros/</code>) for the various options you can use to run WCSim</p>
<h2>Color Convention for visualization used in WCSimVismanager.cc</h2>
<ul>
<li>gamma = green</li>
<li>neutrino = yellow</li>
<li>electron = blue</li>
<li>positron = red</li>
<li>muon = white</li>
<li>muon+ = silver</li>
<li>proton = magenta</li>
<li>neutron = cyan</li>
</ul>
<p>``` WCSim development is supported by the United States National Science Foundation. ``` </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 26 2022 13:02:37 for WCSim by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
